# ğŸ¨ Realtime Collaborative Whiteboard - System Prototype

## ğŸ“ 1. Kiáº¿n trÃºc Tá»•ng quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SYSTEM ARCHITECTURE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        CLIENT LAYER (React + Bun + Vite)              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚   Canvas    â”‚  â”‚   Toolbar   â”‚  â”‚  UserPanel  â”‚  â”‚    Chat     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Component  â”‚  â”‚  Component  â”‚  â”‚  Component  â”‚  â”‚  Component  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                â”‚         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                      STATE MANAGEMENT (Zustand)                 â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                 â”‚                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                   WebSocket Client (ws + CRDT)                   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                        â”‚    Load Balancer      â”‚                            â”‚
â”‚                        â”‚      (Nginx)          â”‚                            â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    BACKEND LAYER (Rust + Axum)                        â”‚   â”‚
â”‚  â”‚                                 â”‚                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                      WebSocket Handler                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Connection  â”‚  â”‚   Message   â”‚  â”‚     Broadcast           â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   Manager   â”‚  â”‚   Router    â”‚  â”‚     Manager             â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                 â”‚                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                       REST API Layer                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Auth   â”‚  â”‚  Board  â”‚  â”‚  User   â”‚  â”‚  Export â”‚            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Routes  â”‚  â”‚ Routes  â”‚  â”‚ Routes  â”‚  â”‚ Routes  â”‚            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                 â”‚                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                      Service Layer                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Board     â”‚  â”‚   CRDT     â”‚  â”‚  Session   â”‚                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Service   â”‚  â”‚  Service   â”‚  â”‚  Service   â”‚                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        DATA LAYER                                     â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚         â”‚                       â”‚                       â”‚            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ PostgreSQL  â”‚  â”‚         Redis             â”‚  â”‚   S3/     â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ (Boards,    â”‚  â”‚  (Sessions, PubSub,       â”‚  â”‚  MinIO    â”‚      â”‚   â”‚
â”‚  â”‚  â”‚  Users)     â”‚  â”‚   CRDT State Cache)       â”‚  â”‚ (Assets)  â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ 2. Cáº¥u trÃºc ThÆ° má»¥c

```
collaborative-whiteboard/
â”œâ”€â”€ ğŸ“ backend/                          # Rust + Axum Backend
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ Cargo.lock
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ main.rs                      # Entry point
â”‚   â”‚   â”œâ”€â”€ lib.rs                       # Library exports
â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ database.rs              # DB config
â”‚   â”‚   â”‚   â”œâ”€â”€ redis.rs                 # Redis config
â”‚   â”‚   â”‚   â””â”€â”€ settings.rs              # App settings
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ routes/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.rs              # Auth endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ boards.rs            # Board CRUD
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.rs             # User management
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ export.rs            # Export to PNG/PDF
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.rs              # JWT validation
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rate_limit.rs        # Rate limiting
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cors.rs              # CORS config
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚       â”œâ”€â”€ request.rs           # Request DTOs
â”‚   â”‚   â”‚       â””â”€â”€ response.rs          # Response DTOs
â”‚   â”‚   â”œâ”€â”€ ğŸ“ websocket/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ handler.rs               # WS connection handler
â”‚   â”‚   â”‚   â”œâ”€â”€ messages.rs              # Message types
â”‚   â”‚   â”‚   â”œâ”€â”€ session.rs               # Session management
â”‚   â”‚   â”‚   â””â”€â”€ broadcaster.rs           # Broadcast to rooms
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ board_service.rs         # Board business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ user_service.rs          # User business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ crdt_service.rs          # CRDT operations
â”‚   â”‚   â”‚   â””â”€â”€ auth_service.rs          # Authentication
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ user.rs                  # User model
â”‚   â”‚   â”‚   â”œâ”€â”€ board.rs                 # Board model
â”‚   â”‚   â”‚   â”œâ”€â”€ element.rs               # Drawing element
â”‚   â”‚   â”‚   â””â”€â”€ cursor.rs                # Cursor position
â”‚   â”‚   â”œâ”€â”€ ğŸ“ repository/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ user_repo.rs             # User data access
â”‚   â”‚   â”‚   â”œâ”€â”€ board_repo.rs            # Board data access
â”‚   â”‚   â”‚   â””â”€â”€ element_repo.rs          # Element data access
â”‚   â”‚   â”œâ”€â”€ ğŸ“ crdt/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ lww_register.rs          # Last-Write-Wins Register
â”‚   â”‚   â”‚   â”œâ”€â”€ grow_only_set.rs         # Grow-Only Set
â”‚   â”‚   â”‚   â””â”€â”€ operation.rs             # CRDT operations
â”‚   â”‚   â””â”€â”€ ğŸ“ error/
â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚       â””â”€â”€ app_error.rs             # Custom errors
â”‚   â”œâ”€â”€ ğŸ“ migrations/
â”‚   â”‚   â”œâ”€â”€ 001_create_users.sql
â”‚   â”‚   â”œâ”€â”€ 002_create_boards.sql
â”‚   â”‚   â””â”€â”€ 003_create_elements.sql
â”‚   â””â”€â”€ ğŸ“ tests/
â”‚       â”œâ”€â”€ integration/
â”‚       â””â”€â”€ unit/
â”‚
â”œâ”€â”€ ğŸ“ frontend/                         # React + Bun + Vite
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ bun.lockb
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ ğŸ“ public/
â”‚   â”‚   â””â”€â”€ favicon.ico
â”‚   â””â”€â”€ ğŸ“ src/
â”‚       â”œâ”€â”€ main.tsx                     # Entry point
â”‚       â”œâ”€â”€ App.tsx                      # Root component
â”‚       â”œâ”€â”€ vite-env.d.ts
â”‚       â”œâ”€â”€ ğŸ“ pages/
â”‚       â”‚   â”œâ”€â”€ Home.tsx                 # Landing page
â”‚       â”‚   â”œâ”€â”€ Dashboard.tsx            # User dashboard
â”‚       â”‚   â”œâ”€â”€ Board.tsx                # Whiteboard page
â”‚       â”‚   â”œâ”€â”€ Login.tsx                # Login page
â”‚       â”‚   â””â”€â”€ NotFound.tsx             # 404 page
â”‚       â”œâ”€â”€ ğŸ“ components/
â”‚       â”‚   â”œâ”€â”€ ğŸ“ canvas/
â”‚       â”‚   â”‚   â”œâ”€â”€ Canvas.tsx           # Main canvas
â”‚       â”‚   â”‚   â”œâ”€â”€ CanvasLayer.tsx      # Canvas layers
â”‚       â”‚   â”‚   â”œâ”€â”€ DrawingTools.tsx     # Drawing tools
â”‚       â”‚   â”‚   â”œâ”€â”€ Element.tsx          # Canvas element
â”‚       â”‚   â”‚   â”œâ”€â”€ SelectionBox.tsx     # Selection rectangle
â”‚       â”‚   â”‚   â””â”€â”€ Grid.tsx             # Background grid
â”‚       â”‚   â”œâ”€â”€ ğŸ“ toolbar/
â”‚       â”‚   â”‚   â”œâ”€â”€ Toolbar.tsx          # Main toolbar
â”‚       â”‚   â”‚   â”œâ”€â”€ ShapeTools.tsx       # Shape selection
â”‚       â”‚   â”‚   â”œâ”€â”€ ColorPicker.tsx      # Color picker
â”‚       â”‚   â”‚   â”œâ”€â”€ StrokeWidth.tsx      # Stroke width
â”‚       â”‚   â”‚   â”œâ”€â”€ TextTool.tsx         # Text tool
â”‚       â”‚   â”‚   â””â”€â”€ ZoomControls.tsx     # Zoom in/out
â”‚       â”‚   â”œâ”€â”€ ğŸ“ collaboration/
â”‚       â”‚   â”‚   â”œâ”€â”€ UserCursors.tsx      # Other users' cursors
â”‚       â”‚   â”‚   â”œâ”€â”€ UserList.tsx         # Online users
â”‚       â”‚   â”‚   â”œâ”€â”€ UserAvatar.tsx       # User avatar
â”‚       â”‚   â”‚   â””â”€â”€ PresenceIndicator.tsx
â”‚       â”‚   â”œâ”€â”€ ğŸ“ chat/
â”‚       â”‚   â”‚   â”œâ”€â”€ ChatPanel.tsx        # Chat sidebar
â”‚       â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx      # Single message
â”‚       â”‚   â”‚   â””â”€â”€ ChatInput.tsx        # Message input
â”‚       â”‚   â”œâ”€â”€ ğŸ“ common/
â”‚       â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ Dropdown.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ Tooltip.tsx
â”‚       â”‚   â”‚   â””â”€â”€ Loading.tsx
â”‚       â”‚   â””â”€â”€ ğŸ“ layout/
â”‚       â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â”‚       â””â”€â”€ Footer.tsx
â”‚       â”œâ”€â”€ ğŸ“ hooks/
â”‚       â”‚   â”œâ”€â”€ useCanvas.ts             # Canvas operations
â”‚       â”‚   â”œâ”€â”€ useWebSocket.ts          # WebSocket connection
â”‚       â”‚   â”œâ”€â”€ useCollaboration.ts      # Collaboration logic
â”‚       â”‚   â”œâ”€â”€ useDraw.ts               # Drawing logic
â”‚       â”‚   â”œâ”€â”€ useHistory.ts            # Undo/Redo
â”‚       â”‚   â”œâ”€â”€ useKeyboard.ts           # Keyboard shortcuts
â”‚       â”‚   â””â”€â”€ usePresence.ts           # User presence
â”‚       â”œâ”€â”€ ğŸ“ stores/
â”‚       â”‚   â”œâ”€â”€ canvasStore.ts           # Canvas state
â”‚       â”‚   â”œâ”€â”€ userStore.ts             # User state
â”‚       â”‚   â”œâ”€â”€ collaborationStore.ts    # Collab state
â”‚       â”‚   â””â”€â”€ uiStore.ts               # UI state
â”‚       â”œâ”€â”€ ğŸ“ services/
â”‚       â”‚   â”œâ”€â”€ api.ts                   # REST API client
â”‚       â”‚   â”œâ”€â”€ websocket.ts             # WebSocket client
â”‚       â”‚   â””â”€â”€ storage.ts               # Local storage
â”‚       â”œâ”€â”€ ğŸ“ types/
â”‚       â”‚   â”œâ”€â”€ canvas.ts                # Canvas types
â”‚       â”‚   â”œâ”€â”€ user.ts                  # User types
â”‚       â”‚   â”œâ”€â”€ websocket.ts             # WS message types
â”‚       â”‚   â””â”€â”€ api.ts                   # API types
â”‚       â”œâ”€â”€ ğŸ“ utils/
â”‚       â”‚   â”œâ”€â”€ canvas.ts                # Canvas utilities
â”‚       â”‚   â”œâ”€â”€ geometry.ts              # Geometry calculations
â”‚       â”‚   â”œâ”€â”€ colors.ts                # Color utilities
â”‚       â”‚   â”œâ”€â”€ crdt.ts                  # CRDT utilities
â”‚       â”‚   â””â”€â”€ helpers.ts               # General helpers
â”‚       â””â”€â”€ ğŸ“ styles/
â”‚           â”œâ”€â”€ globals.css              # Global styles
â”‚           â””â”€â”€ canvas.css               # Canvas styles
â”‚
â”œâ”€â”€ ğŸ“ shared/                           # Shared types (optional)
â”‚   â””â”€â”€ ğŸ“ types/
â”‚       â”œâ”€â”€ messages.ts
â”‚       â””â”€â”€ elements.ts
â”‚
â”œâ”€â”€ ğŸ“ docker/
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ ğŸ“ docs/
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â””â”€â”€ WEBSOCKET.md
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env.example
â”œâ”€â”€ README.md
â””â”€â”€ Makefile
```

---


## ğŸ”Œ 4. WebSocket Protocol Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        WEBSOCKET MESSAGE PROTOCOL                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     CONNECTION LIFECYCLE                               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Client                                 Server                         â”‚  â”‚
â”‚  â”‚    â”‚                                      â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚â”€â”€â”€â”€ WS Connect /ws/board/{id} â”€â”€â”€â”€â”€â–¶â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚                                      â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚â—€â”€â”€â”€ { type: "connected",            â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚       user_id, board_state } â”€â”€â”€â”€â”€â”€â”€â”€â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚                                      â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚â”€â”€â”€â”€ { type: "join_room",            â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚       board_id, user_info } â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚                                      â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚â—€â”€â”€â”€ { type: "user_joined",          â”‚ (broadcast to room)        â”‚  â”‚
â”‚  â”‚    â”‚       user_info } â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                            â”‚  â”‚
â”‚  â”‚    â”‚                                      â”‚                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     MESSAGE TYPES                                      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  CLIENT -> SERVER                                                      â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Drawing Operations                                                 â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "element_create",                                          â”‚  â”‚
â”‚  â”‚    "payload": {                                                       â”‚  â”‚
â”‚  â”‚      "id": "uuid",                                                    â”‚  â”‚
â”‚  â”‚      "element_type": "rectangle",                                     â”‚  â”‚
â”‚  â”‚      "data": { "x": 100, "y": 200, ... }                             â”‚  â”‚
â”‚  â”‚    },                                                                 â”‚  â”‚
â”‚  â”‚    "timestamp": 1699999999999                                         â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "element_update",                                          â”‚  â”‚
â”‚  â”‚    "payload": {                                                       â”‚  â”‚
â”‚  â”‚      "id": "uuid",                                                    â”‚  â”‚
â”‚  â”‚      "changes": { "x": 150, "y": 250 }                               â”‚  â”‚
â”‚  â”‚    },                                                                 â”‚  â”‚
â”‚  â”‚    "timestamp": 1699999999999                                         â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "element_delete",                                          â”‚  â”‚
â”‚  â”‚    "payload": { "id": "uuid" },                                       â”‚  â”‚
â”‚  â”‚    "timestamp": 1699999999999                                         â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Cursor & Presence                                                  â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "cursor_move",                                             â”‚  â”‚
â”‚  â”‚    "payload": { "x": 500, "y": 300 }                                  â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Selection                                                          â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "element_select",                                          â”‚  â”‚
â”‚  â”‚    "payload": { "element_ids": ["uuid1", "uuid2"] }                   â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Chat                                                               â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "chat_message",                                            â”‚  â”‚
â”‚  â”‚    "payload": { "content": "Hello!" }                                 â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  SERVER -> CLIENT                                                      â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // State Sync                                                         â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "board_state",                                             â”‚  â”‚
â”‚  â”‚    "payload": {                                                       â”‚  â”‚
â”‚  â”‚      "elements": [...],                                               â”‚  â”‚
â”‚  â”‚      "users": [...]                                                   â”‚  â”‚
â”‚  â”‚    }                                                                  â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Broadcast Events                                                   â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "element_created",                                         â”‚  â”‚
â”‚  â”‚    "payload": { ... },                                                â”‚  â”‚
â”‚  â”‚    "user_id": "uuid",                                                 â”‚  â”‚
â”‚  â”‚    "timestamp": 1699999999999                                         â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  // Error                                                              â”‚  â”‚
â”‚  â”‚  {                                                                     â”‚  â”‚
â”‚  â”‚    "type": "error",                                                   â”‚  â”‚
â”‚  â”‚    "payload": { "code": "CONFLICT", "message": "..." }               â”‚  â”‚
â”‚  â”‚  }                                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ 5. UI/UX Wireframes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            MAIN WHITEBOARD UI                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ HEADER                                                               â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ ğŸ¨ Logo    â”‚  â”‚ ğŸ“‹ Board Name â–¼           â”‚  â”‚ ğŸ‘¤ User  â”‚ Share â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚TOOLS â”‚ â”‚                                                   â”‚ â”‚USERS â”‚   â”‚
â”‚  â”‚      â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚                    CANVAS AREA                    â”‚ â”‚ ğŸŸ¢ A â”‚   â”‚
â”‚  â”‚ â”‚â–¢ â”‚ â”‚ â”‚                                                   â”‚ â”‚ ğŸŸ¢ B â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚ â”‚ ğŸŸ¡ C â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚      â”‚              â”‚                            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”‚â—‹ â”‚ â”‚ â”‚      â”‚  Rectangle   â”‚     ğŸ–±ï¸ Cursor B            â”‚ â”‚â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚      â”‚              â”‚                            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚ â”‚ CHAT â”‚   â”‚
â”‚  â”‚ â”‚â•± â”‚ â”‚ â”‚                           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®             â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚                           â”‚  Ellipseâ”‚             â”‚ â”‚ A: Hiâ”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚      ğŸ–±ï¸ Cursor A          â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯             â”‚ â”‚ B:Heyâ”‚   â”‚
â”‚  â”‚ â”‚â†’ â”‚ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚                      âœï¸ Freehand Drawing          â”‚ â”‚ â”Œâ”€â”€â”€â”â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚                     ~~~~~~~~~~~~~~~~~~~~~~        â”‚ â”‚ â”‚   â”‚â”‚   â”‚
â”‚  â”‚ â”‚âœï¸â”‚ â”‚ â”‚                                                   â”‚ â”‚ â””â”€â”€â”€â”˜â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”‚T â”‚ â”‚ â”‚    â”‚      ğŸ“ Text Element            â”‚            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚    â”‚      "Hello World!"             â”‚            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”‚ğŸ“·â”‚ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â” â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â”‚ğŸ“Œâ”‚ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”˜ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚      â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â”‚ ğŸ”™ğŸ”œ â”‚ â”‚                                                   â”‚ â”‚      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ BOTTOM BAR                                                          â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚
â”‚  â”‚ â”‚ ğŸ” 75%   â”‚  â”‚  Colors: âš« ğŸ”´ ğŸŸ¡ ğŸŸ¢ ğŸ”µ âšª | â”€ â”   â”‚  â”‚ ğŸ“¤ Export â”‚â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TOOLBAR DETAIL                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚   â”‚ ğŸ–±ï¸  â”‚  â”‚  â–¢  â”‚  â”‚  â—‹  â”‚  â”‚  â—‡  â”‚  â”‚  â•±  â”‚  â”‚  â†’  â”‚            â”‚    â”‚
â”‚  â”‚   â”‚Selectâ”‚  â”‚Rect â”‚  â”‚Circleâ”‚ â”‚Diamondâ”‚ â”‚Line â”‚  â”‚Arrow â”‚           â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚   â”‚ âœï¸  â”‚  â”‚  T  â”‚  â”‚ ğŸ“·  â”‚  â”‚ ğŸ“Œ  â”‚  â”‚ ğŸ”—  â”‚  â”‚  âœ‹ â”‚            â”‚    â”‚
â”‚  â”‚   â”‚ Pen â”‚  â”‚Text â”‚  â”‚Imageâ”‚  â”‚Stickyâ”‚  â”‚Link â”‚  â”‚ Pan â”‚            â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   PROPERTIES (when element selected):                               â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚
â”‚  â”‚   â”‚ Fill:   â¬œ â¬› ğŸŸ¥ ğŸŸ§ ğŸŸ¨ ğŸŸ© ğŸŸ¦ ğŸŸª [More...]       â”‚              â”‚    â”‚
â”‚  â”‚   â”‚ Stroke: â¬œ â¬› ğŸŸ¥ ğŸŸ§ ğŸŸ¨ ğŸŸ© ğŸŸ¦ ğŸŸª [More...]       â”‚              â”‚    â”‚
â”‚  â”‚   â”‚ Width:  [â”â”â”â”â”â”â”â”â—â”â”â”] 3px                      â”‚              â”‚    â”‚
â”‚  â”‚   â”‚ Style:  â”€â”€ â•Œâ•Œ âˆ™âˆ™                                â”‚              â”‚    â”‚
â”‚  â”‚   â”‚ Opacity:[â”â”â”â—â”â”â”â”â”â”â”â”] 80%                      â”‚              â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   ACTIONS:                                                          â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                     â”‚    â”‚
â”‚  â”‚   â”‚ â†¶  â”‚  â”‚  â†·  â”‚  â”‚  ğŸ“‹ â”‚  â”‚ ğŸ—‘ï¸  â”‚  â”‚ ğŸ”’  â”‚                     â”‚    â”‚
â”‚  â”‚   â”‚Undo â”‚  â”‚Redo â”‚  â”‚Copy â”‚  â”‚Deleteâ”‚  â”‚Lock â”‚                     â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER PRESENCE & CURSORS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   Online Users Panel:                                               â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚    â”‚
â”‚  â”‚   â”‚  ğŸ‘¥ 3 Online                  â”‚                                 â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚    â”‚
â”‚  â”‚   â”‚  ğŸŸ¢ â—â”€â”€â”€ Alice (You)         â”‚                                 â”‚    â”‚
â”‚  â”‚   â”‚     ğŸŸ¦ Color                  â”‚                                 â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚    â”‚
â”‚  â”‚   â”‚  ğŸŸ¢ â—â”€â”€â”€ Bob                 â”‚                                 â”‚    â”‚
â”‚  â”‚   â”‚     ğŸŸ¥ Color                  â”‚                                 â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚    â”‚
â”‚  â”‚   â”‚  ğŸŸ¡ â—â”€â”€â”€ Carol (away)        â”‚                                 â”‚    â”‚
â”‚  â”‚   â”‚     ğŸŸ© Color                  â”‚                                 â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   Cursor Visualization on Canvas:                                   â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚         ğŸ”µ                                                          â”‚    â”‚
â”‚  â”‚          â†–                                                          â”‚    â”‚
â”‚  â”‚           Alice                                                     â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚                                    ğŸ”´                               â”‚    â”‚
â”‚  â”‚                                     â†–                               â”‚    â”‚
â”‚  â”‚                                      Bob                            â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚           ğŸŸ¢                                                        â”‚    â”‚
â”‚  â”‚            â†–                                                        â”‚    â”‚
â”‚  â”‚             Carol                                                   â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   (Each cursor shows user color and name label)                     â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ 6. Core Code Snippets

### Backend (Rust + Axum)

```rust
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/main.rs - Entry Point
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use axum::{
    routing::{get, post},
    Router,
    Extension,
};
use std::sync::Arc;
use tokio::sync::RwLock;
use tower_http::cors::CorsLayer;

mod api;
mod config;
mod models;
mod services;
mod websocket;
mod error;

use crate::websocket::state::AppState;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // Initialize tracing
    tracing_subscriber::init();
    
    // Load configuration
    let config = config::Settings::from_env()?;
    
    // Initialize database pool
    let db_pool = config::database::create_pool(&config.database_url).await?;
    
    // Initialize Redis
    let redis_client = config::redis::create_client(&config.redis_url)?;
    
    // Create shared application state
    let app_state = Arc::new(AppState::new(db_pool, redis_client));
    
    // Build router
    let app = Router::new()
        // REST API routes
        .nest("/api", api::routes::create_router())
        // WebSocket route
        .route("/ws/board/:board_id", get(websocket::handler::ws_handler))
        // Health check
        .route("/health", get(|| async { "OK" }))
        // Add middleware
        .layer(CorsLayer::permissive())
        .layer(Extension(app_state));
    
    // Start server
    let listener = tokio::net::TcpListener::bind("0.0.0.0:8080").await?;
    tracing::info!("ğŸš€ Server running on http://0.0.0.0:8080");
    
    axum::serve(listener, app).await?;
    
    Ok(())
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/websocket/handler.rs - WebSocket Handler
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use axum::{
    extract::{
        ws::{Message, WebSocket, WebSocketUpgrade},
        Path, Extension,
    },
    response::Response,
};
use futures::{SinkExt, StreamExt};
use std::sync::Arc;
use tokio::sync::mpsc;
use uuid::Uuid;

use crate::websocket::{
    messages::{ClientMessage, ServerMessage},
    state::AppState,
};

pub async fn ws_handler(
    ws: WebSocketUpgrade,
    Path(board_id): Path<Uuid>,
    Extension(state): Extension<Arc<AppState>>,
) -> Response {
    ws.on_upgrade(move |socket| handle_socket(socket, board_id, state))
}

async fn handle_socket(socket: WebSocket, board_id: Uuid, state: Arc<AppState>) {
    let (mut sender, mut receiver) = socket.split();
    
    // Generate user session ID
    let session_id = Uuid::new_v4();
    
    // Create message channel for this connection
    let (tx, mut rx) = mpsc::unbounded_channel::<ServerMessage>();
    
    // Register user in the room
    state.rooms.write().await
        .entry(board_id)
        .or_default()
        .insert(session_id, tx.clone());
    
    // Send initial board state
    let board_state = state.get_board_state(board_id).await;
    let _ = tx.send(ServerMessage::BoardState(board_state));
    
    // Spawn task to forward messages to WebSocket
    let send_task = tokio::spawn(async move {
        while let Some(msg) = rx.recv().await {
            let json = serde_json::to_string(&msg).unwrap();
            if sender.send(Message::Text(json)).await.is_err() {
                break;
            }
        }
    });
    
    // Handle incoming messages
    let state_clone = state.clone();
    let receive_task = tokio::spawn(async move {
        while let Some(Ok(Message::Text(text))) = receiver.next().await {
            if let Ok(msg) = serde_json::from_str::<ClientMessage>(&text) {
                handle_client_message(
                    &state_clone,
                    board_id,
                    session_id,
                    msg
                ).await;
            }
        }
    });
    
    // Wait for either task to complete
    tokio::select! {
        _ = send_task => {},
        _ = receive_task => {},
    }
    
    // Clean up: remove user from room
    state.rooms.write().await
        .get_mut(&board_id)
        .map(|room| room.remove(&session_id));
    
    // Broadcast user left
    state.broadcast_to_room(
        board_id,
        ServerMessage::UserLeft { user_id: session_id },
        Some(session_id),
    ).await;
}

async fn handle_client_message(
    state: &Arc<AppState>,
    board_id: Uuid,
    session_id: Uuid,
    msg: ClientMessage,
) {
    match msg {
        ClientMessage::ElementCreate { element } => {
            // Apply CRDT operation
            state.crdt_service.apply_create(board_id, &element).await;
            
            // Broadcast to other users
            state.broadcast_to_room(
                board_id,
                ServerMessage::ElementCreated {
                    element,
                    user_id: session_id,
                },
                Some(session_id),
            ).await;
        }
        
        ClientMessage::ElementUpdate { id, changes } => {
            // Apply CRDT operation with LWW
            state.crdt_service.apply_update(board_id, id, &changes).await;
            
            // Broadcast to other users
            state.broadcast_to_room(
                board_id,
                ServerMessage::ElementUpdated {
                    id,
                    changes,
                    user_id: session_id,
                },
                Some(session_id),
            ).await;
        }
        
        ClientMessage::ElementDelete { id } => {
            state.crdt_service.apply_delete(board_id, id).await;
            
            state.broadcast_to_room(
                board_id,
                ServerMessage::ElementDeleted {
                    id,
                    user_id: session_id,
                },
                Some(session_id),
            ).await;
        }
        
        ClientMessage::CursorMove { x, y } => {
            // Throttled cursor updates (don't persist, just broadcast)
            state.broadcast_to_room(
                board_id,
                ServerMessage::CursorMoved {
                    user_id: session_id,
                    x,
                    y,
                },
                Some(session_id),
            ).await;
        }
        
        ClientMessage::ChatMessage { content } => {
            let message = ChatMessage {
                id: Uuid::new_v4(),
                user_id: session_id,
                content,
                timestamp: chrono::Utc::now(),
            };
            
            state.broadcast_to_room(
                board_id,
                ServerMessage::ChatMessage(message),
                None, // Send to everyone including sender
            ).await;
        }
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/websocket/messages.rs - Message Types
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use serde::{Deserialize, Serialize};
use uuid::Uuid;

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "type", content = "payload")]
pub enum ClientMessage {
    #[serde(rename = "element_create")]
    ElementCreate { element: Element },
    
    #[serde(rename = "element_update")]
    ElementUpdate { id: Uuid, changes: serde_json::Value },
    
    #[serde(rename = "element_delete")]
    ElementDelete { id: Uuid },
    
    #[serde(rename = "cursor_move")]
    CursorMove { x: f64, y: f64 },
    
    #[serde(rename = "element_select")]
    ElementSelect { element_ids: Vec<Uuid> },
    
    #[serde(rename = "chat_message")]
    ChatMessage { content: String },
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(tag = "type", content = "payload")]
pub enum ServerMessage {
    #[serde(rename = "connected")]
    Connected { session_id: Uuid },
    
    #[serde(rename = "board_state")]
    BoardState(BoardState),
    
    #[serde(rename = "user_joined")]
    UserJoined { user: UserInfo },
    
    #[serde(rename = "user_left")]
    UserLeft { user_id: Uuid },
    
    #[serde(rename = "element_created")]
    ElementCreated { element: Element, user_id: Uuid },
    
    #[serde(rename = "element_updated")]
    ElementUpdated { id: Uuid, changes: serde_json::Value, user_id: Uuid },
    
    #[serde(rename = "element_deleted")]
    ElementDeleted { id: Uuid, user_id: Uuid },
    
    #[serde(rename = "cursor_moved")]
    CursorMoved { user_id: Uuid, x: f64, y: f64 },
    
    #[serde(rename = "chat_message")]
    ChatMessage(ChatMessage),
    
    #[serde(rename = "error")]
    Error { code: String, message: String },
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/models/element.rs - Element Model
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use serde::{Deserialize, Serialize};
use sqlx::FromRow;
use uuid::Uuid;

#[derive(Debug, Clone, Serialize, Deserialize, sqlx::Type)]
#[sqlx(type_name = "element_type", rename_all = "snake_case")]
pub enum ElementType {
    Rectangle,
    Ellipse,
    Line,
    Arrow,
    Freehand,
    Text,
    Image,
    StickyNote,
    Connector,
    Frame,
    Group,
}

#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]
pub struct Element {
    pub id: Uuid,
    pub board_id: Uuid,
    pub element_type: ElementType,
    pub data: serde_json::Value,
    pub z_index: i32,
    pub created_by: Uuid,
    pub created_at: chrono::DateTime<chrono::Utc>,
    pub updated_at: chrono::DateTime<chrono::Utc>,
    pub deleted_at: Option<chrono::DateTime<chrono::Utc>>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ElementData {
    // Position
    pub x: f64,
    pub y: f64,
    
    // Size
    pub width: Option<f64>,
    pub height: Option<f64>,
    
    // Transform
    pub rotation: f64,
    
    // Style
    pub fill: Option<String>,
    pub stroke: Option<String>,
    pub stroke_width: f64,
    pub opacity: f64,
    
    // For freehand
    pub points: Option<Vec<[f64; 2]>>,
    
    // For text
    pub text: Option<String>,
    pub font_size: Option<f64>,
    pub font_family: Option<String>,
    
    // For images
    pub image_url: Option<String>,
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/crdt/lww_register.rs - Last-Write-Wins Register
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

use serde::{Deserialize, Serialize};
use std::cmp::Ordering;

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LWWRegister<T> {
    pub value: T,
    pub timestamp: i64,
    pub node_id: String,
}

impl<T: Clone> LWWRegister<T> {
    pub fn new(value: T, node_id: String) -> Self {
        Self {
            value,
            timestamp: chrono::Utc::now().timestamp_millis(),
            node_id,
        }
    }
    
    pub fn update(&mut self, new_value: T, timestamp: i64, node_id: String) -> bool {
        match timestamp.cmp(&self.timestamp) {
            Ordering::Greater => {
                self.value = new_value;
                self.timestamp = timestamp;
                self.node_id = node_id;
                true
            }
            Ordering::Equal => {
                // Tie-breaker: use node_id
                if node_id > self.node_id {
                    self.value = new_value;
                    self.node_id = node_id;
                    true
                } else {
                    false
                }
            }
            Ordering::Less => false,
        }
    }
    
    pub fn merge(&mut self, other: &LWWRegister<T>) -> bool {
        self.update(other.value.clone(), other.timestamp, other.node_id.clone())
    }
}
```

### Frontend (React + TypeScript)

```typescript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/stores/canvasStore.ts - Canvas State Management (Zustand)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import { create } from 'zustand';
import { immer } from 'zustand/middleware/immer';
import type { Element, Tool, Point } from '@/types/canvas';

interface CanvasState {
  // Elements
  elements: Map<string, Element>;
  selectedIds: Set<string>;
  
  // Tool & View
  activeTool: Tool;
  zoom: number;
  pan: Point;
  
  // Drawing state
  isDrawing: boolean;
  drawingElement: Element | null;
  
  // History
  history: Element[][];
  historyIndex: number;
  
  // Actions
  addElement: (element: Element) => void;
  updateElement: (id: string, changes: Partial<Element>) => void;
  deleteElement: (id: string) => void;
  deleteElements: (ids: string[]) => void;
  
  setSelectedIds: (ids: Set<string>) => void;
  setActiveTool: (tool: Tool) => void;
  setZoom: (zoom: number) => void;
  setPan: (pan: Point) => void;
  
  startDrawing: (element: Element) => void;
  updateDrawing: (changes: Partial<Element>) => void;
  finishDrawing: () => void;
  
  undo: () => void;
  redo: () => void;
  
  // Remote sync
  applyRemoteChange: (change: RemoteChange) => void;
}

export const useCanvasStore = create<CanvasState>()(
  immer((set, get) => ({
    elements: new Map(),
    selectedIds: new Set(),
    activeTool: 'select',
    zoom: 1,
    pan: { x: 0, y: 0 },
    isDrawing: false,
    drawingElement: null,
    history: [],
    historyIndex: -1,
    
    addElement: (element) => {
      set((state) => {
        state.elements.set(element.id, element);
        // Save to history
        state.history = state.history.slice(0, state.historyIndex + 1);
        state.history.push([...state.elements.values()]);
        state.historyIndex++;
      });
    },
    
    updateElement: (id, changes) => {
      set((state) => {
        const element = state.elements.get(id);
        if (element) {
          state.elements.set(id, { ...element, ...changes });
        }
      });
    },
    
    deleteElement: (id) => {
      set((state) => {
        state.elements.delete(id);
        state.selectedIds.delete(id);
      });
    },
    
    deleteElements: (ids) => {
      set((state) => {
        ids.forEach((id) => {
          state.elements.delete(id);
          state.selectedIds.delete(id);
        });
      });
    },
    
    setSelectedIds: (ids) => set({ selectedIds: ids }),
    setActiveTool: (tool) => set({ activeTool: tool }),
    setZoom: (zoom) => set({ zoom: Math.max(0.1, Math.min(5, zoom)) }),
    setPan: (pan) => set({ pan }),
    
    startDrawing: (element) => {
      set({ isDrawing: true, drawingElement: element });
    },
    
    updateDrawing: (changes) => {
      set((state) => {
        if (state.drawingElement) {
          state.drawingElement = { ...state.drawingElement, ...changes };
        }
      });
    },
    
    finishDrawing: () => {
      const { drawingElement, addElement } = get();
      if (drawingElement) {
        addElement(drawingElement);
      }
      set({ isDrawing: false, drawingElement: null });
    },
    
    undo: () => {
      set((state) => {
        if (state.historyIndex > 0) {
          state.historyIndex--;
          const snapshot = state.history[state.historyIndex];
          state.elements = new Map(snapshot.map((el) => [el.id, el]));
        }
      });
    },
    
    redo: () => {
      set((state) => {
        if (state.historyIndex < state.history.length - 1) {
          state.historyIndex++;
          const snapshot = state.history[state.historyIndex];
          state.elements = new Map(snapshot.map((el) => [el.id, el]));
        }
      });
    },
    
    applyRemoteChange: (change) => {
      set((state) => {
        switch (change.type) {
          case 'create':
            state.elements.set(change.element.id, change.element);
            break;
          case 'update':
            const el = state.elements.get(change.id);
            if (el) {
              state.elements.set(change.id, { ...el, ...change.changes });
            }
            break;
          case 'delete':
            state.elements.delete(change.id);
            break;
        }
      });
    },
  }))
);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/hooks/useWebSocket.ts - WebSocket Hook
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import { useEffect, useRef, useCallback } from 'react';
import { useCanvasStore } from '@/stores/canvasStore';
import { useCollaborationStore } from '@/stores/collaborationStore';
import type { ServerMessage, ClientMessage } from '@/types/websocket';

const WS_URL = import.meta.env.VITE_WS_URL || 'ws://localhost:8080';

export function useWebSocket(boardId: string) {
  const ws = useRef<WebSocket | null>(null);
  const reconnectAttempts = useRef(0);
  const maxReconnectAttempts = 5;
  
  const { applyRemoteChange } = useCanvasStore();
  const { 
    setUsers, 
    addUser, 
    removeUser, 
    updateCursor,
    setConnected 
  } = useCollaborationStore();
  
  const connect = useCallback(() => {
    try {
      ws.current = new WebSocket(`${WS_URL}/ws/board/${boardId}`);
      
      ws.current.onopen = () => {
        console.log('ğŸŸ¢ WebSocket connected');
        setConnected(true);
        reconnectAttempts.current = 0;
      };
      
      ws.current.onmessage = (event) => {
        const message: ServerMessage = JSON.parse(event.data);
        handleMessage(message);
      };
      
      ws.current.onclose = () => {
        console.log('ğŸ”´ WebSocket disconnected');
        setConnected(false);
        
        // Attempt reconnection
        if (reconnectAttempts.current < maxReconnectAttempts) {
          reconnectAttempts.current++;
          const delay = Math.min(1000 * 2 ** reconnectAttempts.current, 30000);
          setTimeout(connect, delay);
        }
      };
      
      ws.current.onerror = (error) => {
        console.error('WebSocket error:', error);
      };
    } catch (error) {
      console.error('Failed to connect:', error);
    }
  }, [boardId]);
  
  const handleMessage = useCallback((message: ServerMessage) => {
    switch (message.type) {
      case 'board_state':
        // Initialize canvas with board state
        message.payload.elements.forEach((element) => {
          applyRemoteChange({ type: 'create', element });
        });
        setUsers(message.payload.users);
        break;
        
      case 'user_joined':
        addUser(message.payload.user);
        break;
        
      case 'user_left':
        removeUser(message.payload.user_id);
        break;
        
      case 'element_created':
        applyRemoteChange({ 
          type: 'create', 
          element: message.payload.element 
        });
        break;
        
      case 'element_updated':
        applyRemoteChange({
          type: 'update',
          id: message.payload.id,
          changes: message.payload.changes,
        });
        break;
        
      case 'element_deleted':
        applyRemoteChange({
          type: 'delete',
          id: message.payload.id,
        });
        break;
        
      case 'cursor_moved':
        updateCursor(message.payload.user_id, {
          x: message.payload.x,
          y: message.payload.y,
        });
        break;
    }
  }, [applyRemoteChange, setUsers, addUser, removeUser, updateCursor]);
  
  const send = useCallback((message: ClientMessage) => {
    if (ws.current?.readyState === WebSocket.OPEN) {
      ws.current.send(JSON.stringify(message));
    }
  }, []);
  
  // Throttled cursor update
  const sendCursorMove = useCallback(
    throttle((x: number, y: number) => {
      send({ type: 'cursor_move', payload: { x, y } });
    }, 50),
    [send]
  );
  
  useEffect(() => {
    connect();
    return () => {
      ws.current?.close();
    };
  }, [connect]);
  
  return {
    send,
    sendCursorMove,
    isConnected: ws.current?.readyState === WebSocket.OPEN,
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/components/canvas/Canvas.tsx - Main Canvas Component
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import React, { useRef, useEffect, useCallback } from 'react';
import { useCanvasStore } from '@/stores/canvasStore';
import { useWebSocket } from '@/hooks/useWebSocket';
import { useKeyboard } from '@/hooks/useKeyboard';
import { Element } from './Element';
import { SelectionBox } from './SelectionBox';
import { UserCursors } from '../collaboration/UserCursors';
import { Grid } from './Grid';
import { v4 as uuidv4 } from 'uuid';

interface CanvasProps {
  boardId: string;
}

export const Canvas: React.FC<CanvasProps> = ({ boardId }) => {
  const canvasRef = useRef<HTMLDivElement>(null);
  
  const {
    elements,
    selectedIds,
    activeTool,
    zoom,
    pan,
    isDrawing,
    drawingElement,
    addElement,
    updateElement,
    setSelectedIds,
    startDrawing,
    updateDrawing,
    finishDrawing,
  } = useCanvasStore();
  
  const { send, sendCursorMove } = useWebSocket(boardId);
  
  // Keyboard shortcuts
  useKeyboard();
  
  // Handle mouse events
  const handleMouseDown = useCallback((e: React.MouseEvent) => {
    if (activeTool === 'select') {
      // Selection logic
      return;
    }
    
    const rect = canvasRef.current?.getBoundingClientRect();
    if (!rect) return;
    
    const x = (e.clientX - rect.left - pan.x) / zoom;
    const y = (e.clientY - rect.top - pan.y) / zoom;
    
    const newElement = createElementFromTool(activeTool, x, y);
    startDrawing(newElement);
  }, [activeTool, zoom, pan, startDrawing]);
  
  const handleMouseMove = useCallback((e: React.MouseEvent) => {
    const rect = canvasRef.current?.getBoundingClientRect();
    if (!rect) return;
    
    const x = (e.clientX - rect.left - pan.x) / zoom;
    const y = (e.clientY - rect.top - pan.y) / zoom;
    
    // Send cursor position
    sendCursorMove(x, y);
    
    if (isDrawing && drawingElement) {
      const changes = calculateDrawingChanges(drawingElement, x, y);
      updateDrawing(changes);
    }
  }, [zoom, pan, isDrawing, drawingElement, sendCursorMove, updateDrawing]);
  
  const handleMouseUp = useCallback(() => {
    if (isDrawing && drawingElement) {
      finishDrawing();
      
      // Send to server
      send({
        type: 'element_create',
        payload: { element: drawingElement },
      });
    }
  }, [isDrawing, drawingElement, finishDrawing, send]);
  
  return (
    <div
      ref={canvasRef}
      className="relative w-full h-full overflow-hidden bg-gray-50"
      onMouseDown={handleMouseDown}
      onMouseMove={handleMouseMove}
      onMouseUp={handleMouseUp}
      onMouseLeave={handleMouseUp}
    >
      {/* Background Grid */}
      <Grid zoom={zoom} pan={pan} />
      
      {/* Canvas Content */}
      <div
        className="absolute inset-0"
        style={{
          transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,
          transformOrigin: '0 0',
        }}
      >
        {/* Existing Elements */}
        {Array.from(elements.values()).map((element) => (
          <Element
            key={element.id}
            element={element}
            isSelected={selectedIds.has(element.id)}
            onSelect={() => setSelectedIds(new Set([element.id]))}
            onChange={(changes) => {
              updateElement(element.id, changes);
              send({
                type: 'element_update',
                payload: { id: element.id, changes },
              });
            }}
          />
        ))}
        
        {/* Currently Drawing Element */}
        {drawingElement && (
          <Element
            element={drawingElement}
            isSelected={false}
            isDrawing
          />
        )}
        
        {/* Selection Box */}
        <SelectionBox selectedIds={selectedIds} elements={elements} />
      </div>
      
      {/* User Cursors (fixed position, not affected by zoom/pan) */}
      <UserCursors zoom={zoom} pan={pan} />
    </div>
  );
};

// Helper functions
function createElementFromTool(tool: Tool, x: number, y: number): Element {
  const baseElement = {
    id: uuidv4(),
    x,
    y,
    width: 0,
    height: 0,
    rotation: 0,
    fill: '#3B82F6',
    stroke: '#1E40AF',
    strokeWidth: 2,
    opacity: 1,
  };
  
  switch (tool) {
    case 'rectangle':
      return { ...baseElement, type: 'rectangle' };
    case 'ellipse':
      return { ...baseElement, type: 'ellipse' };
    case 'line':
      return { ...baseElement, type: 'line', points: [[x, y]] };
    case 'freehand':
      return { ...baseElement, type: 'freehand', points: [[x, y]] };
    case 'text':
      return { ...baseElement, type: 'text', text: '', fontSize: 16 };
    default:
      return { ...baseElement, type: 'rectangle' };
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// src/components/collaboration/UserCursors.tsx - Remote User Cursors
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import React from 'react';
import { useCollaborationStore } from '@/stores/collaborationStore';
import { motion, AnimatePresence } from 'framer-motion';

interface UserCursorsProps {
  zoom: number;
  pan: { x: number; y: number };
}

export const UserCursors: React.FC<UserCursorsProps> = ({ zoom, pan }) => {
  const { users, cursors } = useCollaborationStore();
  
  return (
    <div className="pointer-events-none absolute inset-0 overflow-hidden">
      <AnimatePresence>
        {users.map((user) => {
          const cursor = cursors.get(user.id);
          if (!cursor) return null;
          
          const screenX = cursor.x * zoom + pan.x;
          const screenY = cursor.y * zoom + pan.y;
          
          return (
            <motion.div
              key={user.id}
              initial={{ opacity: 0, scale: 0 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0 }}
              className="absolute"
              style={{
                left: screenX,
                top: screenY,
                transform: 'translate(-2px, -2px)',
              }}
            >
              {/* Cursor Arrow */}
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill={user.color}
                className="drop-shadow-md"
              >
                <path d="M5.5 3.21V20.8c0 .45.54.67.85.35l4.86-4.86a.5.5 0 0 1 .35-.15h6.87a.5.5 0 0 0 .35-.85L6.35 2.86a.5.5 0 0 0-.85.35z" />
              </svg>
              
              {/* User Name Label */}
              <div
                className="absolute left-5 top-5 px-2 py-1 rounded text-xs text-white whitespace-nowrap"
                style={{ backgroundColor: user.color }}
              >
                {user.name}
              </div>
            </motion.div>
          );
        })}
      </AnimatePresence>
    </div>
  );
};
```

---

## ğŸ³ 7. Docker & Deployment

```yaml
# docker-compose.yml
version: '3.8'

services:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Frontend (React + Bun + Vite)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - VITE_API_URL=http://localhost:8080
      - VITE_WS_URL=ws://localhost:8080
    depends_on:
      - backend
    volumes:
      - ./frontend:/app
      - /app/node_modules
    command: bun run dev

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Backend (Rust + Axum)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - DATABASE_URL=postgres://postgres:password@db:5432/whiteboard
      - REDIS_URL=redis://redis:6379
      - RUST_LOG=info
      - JWT_SECRET=${JWT_SECRET}
    depends_on:
      - db
      - redis
    volumes:
      - ./backend:/app
    command: cargo watch -x run

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # PostgreSQL Database
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=whiteboard
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backend/migrations:/docker-entrypoint-initdb.d

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Redis (Sessions & PubSub)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # MinIO (S3-compatible Object Storage)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  minio:
    image: minio/minio:latest
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      - MINIO_ROOT_USER=minioadmin
      - MINIO_ROOT_PASSWORD=minioadmin
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Nginx (Load Balancer & Reverse Proxy)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
    depends_on:
      - frontend
      - backend

volumes:
  postgres_data:
  redis_data:
  minio_data:
```

---

## ğŸ“Š 8. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW DIAGRAM                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     USER DRAWS ON CANVAS                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. Canvas Component captures mouse events                           â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚  â”‚     â”‚ mousedown   â”‚ â†’ Create drawing element                         â”‚   â”‚
â”‚  â”‚     â”‚ mousemove   â”‚ â†’ Update element dimensions                      â”‚   â”‚
â”‚  â”‚     â”‚ mouseup     â”‚ â†’ Finish drawing                                 â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. Zustand Store updates local state (optimistic update)            â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  canvasStore.addElement(element)                â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ elements.set(id, element)                    â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ history.push(snapshot)                       â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. WebSocket sends message to server                                 â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  {                                              â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "type": "element_create",                    â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "payload": { element },                      â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "timestamp": 1699999999999                   â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  }                                              â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4. Axum WebSocket Handler receives message                          â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  handle_client_message()                        â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Validate message                             â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Parse element data                           â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  5. CRDT Service applies operation                                    â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  crdt_service.apply_create()                    â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Check for conflicts                          â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Apply LWW resolution if needed               â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Update in-memory state                       â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚               â”‚               â”‚                        â”‚
â”‚                    â–¼               â–¼               â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  6a. Persist to  â”‚  â”‚  6b. Cache in    â”‚  â”‚  6c. Broadcast   â”‚          â”‚
â”‚  â”‚  PostgreSQL      â”‚  â”‚  Redis           â”‚  â”‚  to other users  â”‚          â”‚
â”‚  â”‚  (async)         â”‚  â”‚  (realtime)      â”‚  â”‚  (WebSocket)     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                       â”‚                     â”‚
â”‚                                                       â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  7. Other clients receive broadcast                                   â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  {                                              â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "type": "element_created",                   â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "payload": { element },                      â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "user_id": "...",                            â”‚              â”‚   â”‚
â”‚  â”‚     â”‚    "timestamp": 1699999999999                   â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  }                                              â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  8. Client applies remote change                                      â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚     â”‚  canvasStore.applyRemoteChange()                â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Check timestamp (CRDT conflict resolution)   â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Update elements map                          â”‚              â”‚   â”‚
â”‚  â”‚     â”‚  â†’ Trigger re-render                            â”‚              â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ 9. Key Features Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FEATURE IMPLEMENTATION CHECKLIST                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  âœ… MVP Features (Phase 1)                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚  â–¡ User authentication (JWT)                                                â”‚
â”‚  â–¡ Create/Join whiteboard                                                   â”‚
â”‚  â–¡ Basic shapes (rectangle, ellipse, line)                                  â”‚
â”‚  â–¡ Freehand drawing                                                         â”‚
â”‚  â–¡ Text tool                                                                â”‚
â”‚  â–¡ Color picker                                                             â”‚
â”‚  â–¡ Stroke width                                                             â”‚
â”‚  â–¡ Real-time sync via WebSocket                                             â”‚
â”‚  â–¡ User cursors visualization                                               â”‚
â”‚  â–¡ Undo/Redo                                                                â”‚
â”‚                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                              â”‚
â”‚  ğŸ“¦ Enhanced Features (Phase 2)                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  â–¡ Image upload & embedding                                                 â”‚
â”‚  â–¡ Sticky notes                                                             â”‚
â”‚  â–¡ Arrows & connectors                                                      â”‚
â”‚  â–¡ Shape fill patterns                                                      â”‚
â”‚  â–¡ Layer management (z-index)                                               â”‚
â”‚  â–¡ Group/Ungroup elements                                                   â”‚
â”‚  â–¡ Copy/Paste                                                               â”‚
â”‚  â–¡ Keyboard shortcuts                                                       â”‚
â”‚  â–¡ In-board chat                                                            â”‚
â”‚  â–¡ User presence (online/away)                                              â”‚
â”‚  â–¡ Selection locking (prevent conflicts)                                    â”‚
â”‚                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                              â”‚
â”‚  ğŸš€ Advanced Features (Phase 3)                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  â–¡ Export to PNG/PDF/SVG                                                    â”‚
â”‚  â–¡ Board templates                                                          â”‚
â”‚  â–¡ Version history & time travel                                            â”‚
â”‚  â–¡ Comments & annotations                                                   â”‚
â”‚  â–¡ Presentation mode                                                        â”‚
â”‚  â–¡ Frame/Artboard tool                                                      â”‚
â”‚  â–¡ Custom fonts                                                             â”‚
â”‚  â–¡ Embed external content (YouTube, etc.)                                   â”‚
â”‚  â–¡ Board permissions (view/edit/admin)                                      â”‚
â”‚  â–¡ Share via link                                                           â”‚
â”‚  â–¡ Real-time voice/video (optional)                                         â”‚
â”‚                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                              â”‚
â”‚  ğŸ”§ Technical Requirements                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚  â–¡ CRDT for conflict-free sync                                              â”‚
â”‚  â–¡ Optimistic UI updates                                                    â”‚
â”‚  â–¡ WebSocket reconnection                                                   â”‚
â”‚  â–¡ Offline support (local storage)                                          â”‚
â”‚  â–¡ Rate limiting                                                            â”‚
â”‚  â–¡ Message throttling (cursors)                                             â”‚
â”‚  â–¡ Horizontal scaling (Redis PubSub)                                        â”‚
â”‚  â–¡ Database migrations                                                      â”‚
â”‚  â–¡ Error handling & logging                                                 â”‚
â”‚  â–¡ Unit & integration tests                                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


ÄÃ¢y lÃ  má»™t **prototype hoÃ n chá»‰nh** cho Realtime Collaborative Whiteboard. 